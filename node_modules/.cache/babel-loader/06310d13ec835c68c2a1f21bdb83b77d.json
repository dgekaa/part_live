{"ast":null,"code":"var _jsxFileName = \"D:\\\\GitHub\\\\party_live_web\\\\src\\\\pages\\\\auth\\\\Registration.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Header from \"../../components/header/Header\";\nimport SlideSideMenu from \"../../components/slideSideMenu/SlideSideMenu\";\nimport QUERY from \"../../query\";\nimport { useCookies } from \"react-cookie\";\nimport \"./auth.css\";\n\nconst Registration = () => {\n  const [showSlideSideMenu, setShowSlideSideMenu] = useState(false);\n  const [isShowMenu, setIsShowMenu] = useState(false);\n\n  const hideSideMenu = () => {\n    setShowSlideSideMenu(false);\n    document.body.style.overflow = \"visible\";\n    setIsShowMenu(false);\n  };\n\n  const showSideMenu = () => {\n    setShowSlideSideMenu(true);\n    document.body.style.overflow = \"hidden\";\n    setIsShowMenu(true);\n  };\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [rePassword, setRePassword] = useState(\"\");\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [cookies, setCookie, removeCookie] = useCookies([]);\n  const [allValidationError, setAllValidationError] = useState(null);\n  const [oneValidationError, setOneValidationError] = useState(null);\n  const register = useRef(null);\n  useEffect(() => {\n    if (allValidationError) {\n      console.log(allValidationError, \":ASDA\");\n      const nameFirstErrInput = Object.keys(allValidationError)[0].split(\".\")[1];\n\n      for (let i = 0; i < register.current.children.length; i++) {\n        register.current.children[i].style.boxShadow = \"none\";\n      }\n\n      register.current.children[nameFirstErrInput].style.boxShadow = \"0 0 1px 1px rgb(255, 54, 54)\";\n      setOneValidationError(allValidationError[`input.${nameFirstErrInput}`][0]); // register.current.children;\n    }\n  }, [allValidationError]);\n\n  const registration = () => {\n    console.log(name, \"-\", email, \"-\", password, \"-\", rePassword);\n    QUERY({\n      query: `mutation {\n        register (input: {\n          name: \"${name}\",\n            email: \"${email}\",\n            password: \"${password}\"\n            password_confirmation: \"${rePassword}\"\n        }) {status\n          tokens{access_token refresh_token expires_in token_type\n             user{id name email }\n         }}\n      }`\n    }).then(res => {\n      return res.json();\n    }).then(data => {\n      if (!data.errors) {\n        console.log(data.data.register, \" DATA REGISTRATION\");\n        setCookie(\"origin_data\", data.data.register.tokens.access_token);\n        setCookie(\"origin_id\", data.data.register.tokens.user.id);\n        setName(\"\");\n        setEmail(\"\");\n        setPassword(\"\");\n        setRePassword(\"\");\n        setIsSuccess(true);\n      } else {\n        removeCookie(\"origin_data\");\n        removeCookie(\"origin_id\");\n        setAllValidationError(data.errors[0].extensions.validation);\n        console.log(data.errors[0].extensions.validation, \"=====validation\");\n        console.log(data.errors, \"------------------ERR\");\n      }\n    }).catch(err => {\n      removeCookie(\"origin_data\");\n      removeCookie(\"origin_id\");\n      console.log(err, \"  *****************ERR\");\n    });\n  };\n\n  if (Number(cookies.origin_id)) {\n    return React.createElement(Redirect, {\n      to: \"/home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    });\n  } else {\n    return React.createElement(\"div\", {\n      className: \"Login\",\n      onClick: e => {\n        if (e.target.className !== \"SlideSideMenu\" && showSlideSideMenu) {\n          hideSideMenu();\n        }\n      },\n      style: isShowMenu ? {\n        animation: \"toLeft 0.3s ease\",\n        position: \"relative\",\n        right: \"200px\"\n      } : {\n        animation: \"toRight 0.3s ease\",\n        position: \"relative\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Header, {\n      logo: true,\n      burger: true,\n      toSlideFixedHeader: isShowMenu,\n      showSlideSideMenu: showSlideSideMenu,\n      showSideMenu: showSideMenu,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"authBlock\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, !isSuccess && React.createElement(React.Fragment, null, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"\\u0420\\u0415\\u0413\\u0418\\u0421\\u0422\\u0420\\u0410\\u0426\\u0418\\u042F\"), React.createElement(\"form\", {\n      ref: register,\n      onSubmit: e => {\n        e.preventDefault();\n        registration();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"name\",\n      name: \"name\",\n      placeholder: \"\\u0418\\u043C\\u044F\",\n      value: name,\n      onChange: e => {\n        setName(e.target.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"email\",\n      placeholder: \"E-mail\",\n      value: email,\n      onChange: e => {\n        setEmail(e.target.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      value: password,\n      onChange: e => {\n        setPassword(e.target.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      name: \"re_password\",\n      placeholder: \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\",\n      value: rePassword,\n      onChange: e => {\n        setRePassword(e.target.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    })), React.createElement(Link, {\n      className: \"forgetPass\",\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"\\u0423\\u0436\\u0435 \\u0435\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442?\", React.createElement(\"p\", {\n      className: \"errorField\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \" \", oneValidationError))), isSuccess && React.createElement(React.Fragment, null, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"\\u041F\\u041E\\u0417\\u0414\\u0420\\u0410\\u0412\\u041B\\u042F\\u0415\\u041C!\"), React.createElement(\"p\", {\n      className: \"successText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"\\u0412\\u044B \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043F\\u0440\\u043E\\u0448\\u043B\\u0438 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044E!\"), React.createElement(Link, {\n      to: \"/home\",\n      className: \"btnSubmit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"\\u041F\\u0415\\u0420\\u0415\\u0419\\u0422\\u0418 \\u041D\\u0410 \\u0413\\u041B\\u0410\\u0412\\u041D\\u0423\\u042E\"))), React.createElement(SlideSideMenu, {\n      isShowMenu: isShowMenu,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }));\n  }\n};\n\nexport default Registration;","map":{"version":3,"sources":["D:/GitHub/party_live_web/src/pages/auth/Registration.js"],"names":["React","useState","useEffect","useRef","Link","Redirect","Header","SlideSideMenu","QUERY","useCookies","Registration","showSlideSideMenu","setShowSlideSideMenu","isShowMenu","setIsShowMenu","hideSideMenu","document","body","style","overflow","showSideMenu","name","setName","email","setEmail","password","setPassword","rePassword","setRePassword","isSuccess","setIsSuccess","cookies","setCookie","removeCookie","allValidationError","setAllValidationError","oneValidationError","setOneValidationError","register","console","log","nameFirstErrInput","Object","keys","split","i","current","children","length","boxShadow","registration","query","then","res","json","data","errors","tokens","access_token","user","id","extensions","validation","catch","err","Number","origin_id","e","target","className","animation","position","right","preventDefault","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,aAAP,MAA0B,8CAA1B;AAEA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAO,YAAP;;AAEA,MAAMC,YAAY,GAAG,MAAM;AACzB,QAAM,CAACC,iBAAD,EAAoBC,oBAApB,IAA4CX,QAAQ,CAAC,KAAD,CAA1D;AACA,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,KAAD,CAA5C;;AAEA,QAAMc,YAAY,GAAG,MAAM;AACzBH,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACAI,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,QAApB,GAA+B,SAA/B;AACAL,IAAAA,aAAa,CAAC,KAAD,CAAb;AACD,GAJD;;AAMA,QAAMM,YAAY,GAAG,MAAM;AACzBR,IAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAI,IAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,QAApB,GAA+B,QAA/B;AACAL,IAAAA,aAAa,CAAC,IAAD,CAAb;AACD,GAJD;;AAMA,QAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBrB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACsB,KAAD,EAAQC,QAAR,IAAoBvB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACwB,QAAD,EAAWC,WAAX,IAA0BzB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAAC0B,UAAD,EAAaC,aAAb,IAA8B3B,QAAQ,CAAC,EAAD,CAA5C;AAEA,QAAM,CAAC4B,SAAD,EAAYC,YAAZ,IAA4B7B,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC8B,OAAD,EAAUC,SAAV,EAAqBC,YAArB,IAAqCxB,UAAU,CAAC,EAAD,CAArD;AACA,QAAM,CAACyB,kBAAD,EAAqBC,qBAArB,IAA8ClC,QAAQ,CAAC,IAAD,CAA5D;AACA,QAAM,CAACmC,kBAAD,EAAqBC,qBAArB,IAA8CpC,QAAQ,CAAC,IAAD,CAA5D;AAEA,QAAMqC,QAAQ,GAAGnC,MAAM,CAAC,IAAD,CAAvB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIgC,kBAAJ,EAAwB;AACtBK,MAAAA,OAAO,CAACC,GAAR,CAAYN,kBAAZ,EAAgC,OAAhC;AACA,YAAMO,iBAAiB,GAAGC,MAAM,CAACC,IAAP,CAAYT,kBAAZ,EAAgC,CAAhC,EAAmCU,KAAnC,CACxB,GADwB,EAExB,CAFwB,CAA1B;;AAIA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,QAAQ,CAACQ,OAAT,CAAiBC,QAAjB,CAA0BC,MAA9C,EAAsDH,CAAC,EAAvD,EAA2D;AACzDP,QAAAA,QAAQ,CAACQ,OAAT,CAAiBC,QAAjB,CAA0BF,CAA1B,EAA6B3B,KAA7B,CAAmC+B,SAAnC,GAA+C,MAA/C;AACD;;AAEDX,MAAAA,QAAQ,CAACQ,OAAT,CAAiBC,QAAjB,CAA0BN,iBAA1B,EAA6CvB,KAA7C,CAAmD+B,SAAnD,GACE,8BADF;AAGAZ,MAAAA,qBAAqB,CACnBH,kBAAkB,CAAE,SAAQO,iBAAkB,EAA5B,CAAlB,CAAiD,CAAjD,CADmB,CAArB,CAbsB,CAiBtB;AACD;AACF,GApBQ,EAoBN,CAACP,kBAAD,CApBM,CAAT;;AAsBA,QAAMgB,YAAY,GAAG,MAAM;AACzBX,IAAAA,OAAO,CAACC,GAAR,CAAYnB,IAAZ,EAAkB,GAAlB,EAAuBE,KAAvB,EAA8B,GAA9B,EAAmCE,QAAnC,EAA6C,GAA7C,EAAkDE,UAAlD;AACAnB,IAAAA,KAAK,CAAC;AACJ2C,MAAAA,KAAK,EAAG;;mBAEK9B,IAAK;sBACFE,KAAM;yBACHE,QAAS;sCACIE,UAAW;;;;;;AANvC,KAAD,CAAL,CAaGyB,IAbH,CAaQC,GAAG,IAAI;AACX,aAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,KAfH,EAgBGF,IAhBH,CAgBQG,IAAI,IAAI;AACZ,UAAI,CAACA,IAAI,CAACC,MAAV,EAAkB;AAChBjB,QAAAA,OAAO,CAACC,GAAR,CAAYe,IAAI,CAACA,IAAL,CAAUjB,QAAtB,EAAgC,oBAAhC;AACAN,QAAAA,SAAS,CAAC,aAAD,EAAgBuB,IAAI,CAACA,IAAL,CAAUjB,QAAV,CAAmBmB,MAAnB,CAA0BC,YAA1C,CAAT;AACA1B,QAAAA,SAAS,CAAC,WAAD,EAAcuB,IAAI,CAACA,IAAL,CAAUjB,QAAV,CAAmBmB,MAAnB,CAA0BE,IAA1B,CAA+BC,EAA7C,CAAT;AAEAtC,QAAAA,OAAO,CAAC,EAAD,CAAP;AACAE,QAAAA,QAAQ,CAAC,EAAD,CAAR;AACAE,QAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,QAAAA,aAAa,CAAC,EAAD,CAAb;AACAE,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,OAVD,MAUO;AACLG,QAAAA,YAAY,CAAC,aAAD,CAAZ;AACAA,QAAAA,YAAY,CAAC,WAAD,CAAZ;AAEAE,QAAAA,qBAAqB,CAACoB,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeK,UAAf,CAA0BC,UAA3B,CAArB;AAEAvB,QAAAA,OAAO,CAACC,GAAR,CAAYe,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeK,UAAf,CAA0BC,UAAtC,EAAkD,iBAAlD;AACAvB,QAAAA,OAAO,CAACC,GAAR,CAAYe,IAAI,CAACC,MAAjB,EAAyB,uBAAzB;AACD;AACF,KApCH,EAqCGO,KArCH,CAqCSC,GAAG,IAAI;AACZ/B,MAAAA,YAAY,CAAC,aAAD,CAAZ;AACAA,MAAAA,YAAY,CAAC,WAAD,CAAZ;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAYwB,GAAZ,EAAiB,wBAAjB;AACD,KAzCH;AA0CD,GA5CD;;AA8CA,MAAIC,MAAM,CAAClC,OAAO,CAACmC,SAAT,CAAV,EAA+B;AAC7B,WAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD,GAFD,MAEO;AACL,WACE;AACE,MAAA,SAAS,EAAC,OADZ;AAEE,MAAA,OAAO,EAAEC,CAAC,IAAI;AACZ,YAAIA,CAAC,CAACC,MAAF,CAASC,SAAT,KAAuB,eAAvB,IAA0C1D,iBAA9C,EAAiE;AAC/DI,UAAAA,YAAY;AACb;AACF,OANH;AAOE,MAAA,KAAK,EACHF,UAAU,GACN;AACEyD,QAAAA,SAAS,EAAE,kBADb;AAEEC,QAAAA,QAAQ,EAAE,UAFZ;AAGEC,QAAAA,KAAK,EAAE;AAHT,OADM,GAMN;AACEF,QAAAA,SAAS,EAAE,mBADb;AAEEC,QAAAA,QAAQ,EAAE;AAFZ,OAdR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAoBE,oBAAC,MAAD;AACE,MAAA,IAAI,MADN;AAEE,MAAA,MAAM,MAFR;AAGE,MAAA,kBAAkB,EAAE1D,UAHtB;AAIE,MAAA,iBAAiB,EAAEF,iBAJrB;AAKE,MAAA,YAAY,EAAES,YALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBF,EA2BE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAACS,SAAD,IACC,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4EADF,EAEE;AACE,MAAA,GAAG,EAAES,QADP;AAEE,MAAA,QAAQ,EAAE6B,CAAC,IAAI;AACbA,QAAAA,CAAC,CAACM,cAAF;AACAvB,QAAAA,YAAY;AACb,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,WAAW,EAAC,oBAHd;AAIE,MAAA,KAAK,EAAE7B,IAJT;AAKE,MAAA,QAAQ,EAAE8C,CAAC,IAAI;AACb7C,QAAAA,OAAO,CAAC6C,CAAC,CAACC,MAAF,CAASM,KAAV,CAAP;AACD,OAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,EAgBE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,WAAW,EAAC,QAHd;AAIE,MAAA,KAAK,EAAEnD,KAJT;AAKE,MAAA,QAAQ,EAAE4C,CAAC,IAAI;AACb3C,QAAAA,QAAQ,CAAC2C,CAAC,CAACC,MAAF,CAASM,KAAV,CAAR;AACD,OAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBF,EAyBE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,WAAW,EAAC,sCAHd;AAIE,MAAA,KAAK,EAAEjD,QAJT;AAKE,MAAA,QAAQ,EAAE0C,CAAC,IAAI;AACbzC,QAAAA,WAAW,CAACyC,CAAC,CAACC,MAAF,CAASM,KAAV,CAAX;AACD,OAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzBF,EAkCE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,aAFP;AAGE,MAAA,WAAW,EAAC,2EAHd;AAIE,MAAA,KAAK,EAAE/C,UAJT;AAKE,MAAA,QAAQ,EAAEwC,CAAC,IAAI;AACbvC,QAAAA,aAAa,CAACuC,CAAC,CAACC,MAAF,CAASM,KAAV,CAAb;AACD,OAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlCF,EA2CE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,8GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3CF,CAFF,EA+CE,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC,YAAhB;AAA6B,MAAA,EAAE,EAAC,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kGAEE;AAAG,MAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA4BtC,kBAA5B,CAFF,CA/CF,CAFJ,EAuDGP,SAAS,IACR,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EADF,EAEE;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0KAFF,EAGE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,OAAT;AAAiB,MAAA,SAAS,EAAC,WAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4GAHF,CAxDJ,CA3BF,EA4FE,oBAAC,aAAD;AAAe,MAAA,UAAU,EAAEhB,UAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5FF,CADF;AAgGD;AACF,CApMD;;AAsMA,eAAeH,YAAf","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport Header from \"../../components/header/Header\";\r\nimport SlideSideMenu from \"../../components/slideSideMenu/SlideSideMenu\";\r\n\r\nimport QUERY from \"../../query\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport \"./auth.css\";\r\n\r\nconst Registration = () => {\r\n  const [showSlideSideMenu, setShowSlideSideMenu] = useState(false);\r\n  const [isShowMenu, setIsShowMenu] = useState(false);\r\n\r\n  const hideSideMenu = () => {\r\n    setShowSlideSideMenu(false);\r\n    document.body.style.overflow = \"visible\";\r\n    setIsShowMenu(false);\r\n  };\r\n\r\n  const showSideMenu = () => {\r\n    setShowSlideSideMenu(true);\r\n    document.body.style.overflow = \"hidden\";\r\n    setIsShowMenu(true);\r\n  };\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [rePassword, setRePassword] = useState(\"\");\r\n\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n  const [cookies, setCookie, removeCookie] = useCookies([]);\r\n  const [allValidationError, setAllValidationError] = useState(null);\r\n  const [oneValidationError, setOneValidationError] = useState(null);\r\n\r\n  const register = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (allValidationError) {\r\n      console.log(allValidationError, \":ASDA\");\r\n      const nameFirstErrInput = Object.keys(allValidationError)[0].split(\r\n        \".\"\r\n      )[1];\r\n\r\n      for (let i = 0; i < register.current.children.length; i++) {\r\n        register.current.children[i].style.boxShadow = \"none\";\r\n      }\r\n\r\n      register.current.children[nameFirstErrInput].style.boxShadow =\r\n        \"0 0 1px 1px rgb(255, 54, 54)\";\r\n\r\n      setOneValidationError(\r\n        allValidationError[`input.${nameFirstErrInput}`][0]\r\n      );\r\n\r\n      // register.current.children;\r\n    }\r\n  }, [allValidationError]);\r\n\r\n  const registration = () => {\r\n    console.log(name, \"-\", email, \"-\", password, \"-\", rePassword);\r\n    QUERY({\r\n      query: `mutation {\r\n        register (input: {\r\n          name: \"${name}\",\r\n            email: \"${email}\",\r\n            password: \"${password}\"\r\n            password_confirmation: \"${rePassword}\"\r\n        }) {status\r\n          tokens{access_token refresh_token expires_in token_type\r\n             user{id name email }\r\n         }}\r\n      }`\r\n    })\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        if (!data.errors) {\r\n          console.log(data.data.register, \" DATA REGISTRATION\");\r\n          setCookie(\"origin_data\", data.data.register.tokens.access_token);\r\n          setCookie(\"origin_id\", data.data.register.tokens.user.id);\r\n\r\n          setName(\"\");\r\n          setEmail(\"\");\r\n          setPassword(\"\");\r\n          setRePassword(\"\");\r\n          setIsSuccess(true);\r\n        } else {\r\n          removeCookie(\"origin_data\");\r\n          removeCookie(\"origin_id\");\r\n\r\n          setAllValidationError(data.errors[0].extensions.validation);\r\n\r\n          console.log(data.errors[0].extensions.validation, \"=====validation\");\r\n          console.log(data.errors, \"------------------ERR\");\r\n        }\r\n      })\r\n      .catch(err => {\r\n        removeCookie(\"origin_data\");\r\n        removeCookie(\"origin_id\");\r\n        console.log(err, \"  *****************ERR\");\r\n      });\r\n  };\r\n\r\n  if (Number(cookies.origin_id)) {\r\n    return <Redirect to=\"/home\" />;\r\n  } else {\r\n    return (\r\n      <div\r\n        className=\"Login\"\r\n        onClick={e => {\r\n          if (e.target.className !== \"SlideSideMenu\" && showSlideSideMenu) {\r\n            hideSideMenu();\r\n          }\r\n        }}\r\n        style={\r\n          isShowMenu\r\n            ? {\r\n                animation: \"toLeft 0.3s ease\",\r\n                position: \"relative\",\r\n                right: \"200px\"\r\n              }\r\n            : {\r\n                animation: \"toRight 0.3s ease\",\r\n                position: \"relative\"\r\n              }\r\n        }\r\n      >\r\n        <Header\r\n          logo\r\n          burger\r\n          toSlideFixedHeader={isShowMenu}\r\n          showSlideSideMenu={showSlideSideMenu}\r\n          showSideMenu={showSideMenu}\r\n        />\r\n        <div className=\"authBlock\">\r\n          {!isSuccess && (\r\n            <>\r\n              <h4>РЕГИСТРАЦИЯ</h4>\r\n              <form\r\n                ref={register}\r\n                onSubmit={e => {\r\n                  e.preventDefault();\r\n                  registration();\r\n                }}\r\n              >\r\n                <input\r\n                  type=\"name\"\r\n                  name=\"name\"\r\n                  placeholder=\"Имя\"\r\n                  value={name}\r\n                  onChange={e => {\r\n                    setName(e.target.value);\r\n                  }}\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  placeholder=\"E-mail\"\r\n                  value={email}\r\n                  onChange={e => {\r\n                    setEmail(e.target.value);\r\n                  }}\r\n                />\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  placeholder=\"Пароль\"\r\n                  value={password}\r\n                  onChange={e => {\r\n                    setPassword(e.target.value);\r\n                  }}\r\n                />\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"re_password\"\r\n                  placeholder=\"Повтор пароля\"\r\n                  value={rePassword}\r\n                  onChange={e => {\r\n                    setRePassword(e.target.value);\r\n                  }}\r\n                />\r\n                <input type=\"submit\" value=\"Зарегистрироваться\" />\r\n              </form>\r\n              <Link className=\"forgetPass\" to=\"/login\">\r\n                Уже есть аккаунт?\r\n                <p className=\"errorField\"> {oneValidationError}</p>\r\n              </Link>\r\n            </>\r\n          )}\r\n          {isSuccess && (\r\n            <>\r\n              <h4>ПОЗДРАВЛЯЕМ!</h4>\r\n              <p className=\"successText\">Вы успешно прошли регистрацию!</p>\r\n              <Link to=\"/home\" className=\"btnSubmit\">\r\n                ПЕРЕЙТИ НА ГЛАВНУЮ\r\n              </Link>\r\n            </>\r\n          )}\r\n        </div>\r\n        <SlideSideMenu isShowMenu={isShowMenu} />\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Registration;\r\n"]},"metadata":{},"sourceType":"module"}