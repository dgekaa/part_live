{"ast":null,"code":"import _slicedToArray from\"D:\\\\GitHub\\\\party_live_web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./smallCompanyBlock.css\";import{Link}from\"react-router-dom\";import{isShowStreamNow,isWorkTimeNow}from\"../../calculateTime\";import{getDistanceFromLatLonInKm}from\"../../getDistance\";var SmallCompanyBlock=function SmallCompanyBlock(_ref){var item=_ref.item;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showStream=_useState2[0],setShowStream=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),workTime=_useState4[0],setWorkTime=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isWork=_useState6[0],setIsWork=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),curDistance=_useState8[0],setCurDistance=_useState8[1];useEffect(function(){isShowStreamNow(item,setShowStream);isWorkTimeNow(item,setWorkTime,setIsWork);},[item]);if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(pos){setCurDistance(getDistanceFromLatLonInKm(pos.coords.latitude,pos.coords.longitude,item.coordinates.split(\",\")[0],item.coordinates.split(\",\")[1]));},function(err){console.log(err,\" GEOLOCATION ERROR \");});}else{console.log(\"Геолокация недоступна \");}return React.createElement(Link,{to:{pathname:\"/company/\".concat(item.id)},className:\"SmallCompanyBlock1\"},React.createElement(\"div\",{className:\"imgContainer1\",style:{background:\"#000\"}},!!showStream&&React.createElement(\"video\",{className:\"companyImg1\",src:item.streams[0].preview,autoPlay:true}),!showStream&&React.createElement(\"div\",{className:\"companyImg1\",style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"}},React.createElement(\"p\",{style:{color:\"#fff\",textAlign:\"center\",padding:\"20px\"}},\"\\u041D\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u043C\\u043E\\u043C\\u0435\\u043D\\u0442 \\u0441\\u0442\\u0440\\u0438\\u043C \\u043D\\u0435 \\u0438\\u0434\\u0435\\u0442\"))),React.createElement(\"div\",{className:\"description1\"},React.createElement(\"div\",{className:\"topBlockText1\"},React.createElement(\"div\",{className:\"companyNameWrap1\"},React.createElement(\"p\",{className:\"companyName1\"},item.name),React.createElement(\"p\",{className:\"companyType1\"},item.categories[0].name,\" \"))),React.createElement(\"div\",{className:\"bottomBlockText1\"},React.createElement(\"div\",{className:\"row1\"},React.createElement(\"p\",{className:\"leftText1\"},\"\\u0412\\u0440\\u0435\\u043C\\u044F \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B\")),React.createElement(\"p\",{className:\"rightText1\"},workTime))),React.createElement(\"div\",{className:\"descriptionMobile1\"},React.createElement(\"p\",{className:\"nameOfCompany1\"},item.categories[0].name,\" \\u201C\",item.name,\"\\u201D\"),React.createElement(\"p\",{className:\"distanceFirst1 distanceFirstLeft1\"},curDistance&&React.createElement(\"span\",null,Number(curDistance).toFixed(2),\" km\"),!curDistance&&\" 0 km.\"),isWork&&React.createElement(\"p\",{className:\"endTime1\"},\"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u043E: \\u0434\\u043E\",React.createElement(\"span\",null,\" \",workTime.split(\"-\")[1])),!isWork&&React.createElement(\"p\",{className:\"endTime1\"},\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u043E\")));};export default SmallCompanyBlock;","map":{"version":3,"sources":["D:/GitHub/party_live_web/src/components/smallCompanyBlock/SmallCompanyBlock.js"],"names":["React","useState","useEffect","Link","isShowStreamNow","isWorkTimeNow","getDistanceFromLatLonInKm","SmallCompanyBlock","item","showStream","setShowStream","workTime","setWorkTime","isWork","setIsWork","curDistance","setCurDistance","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","coordinates","split","err","console","log","pathname","id","background","streams","preview","display","alignItems","justifyContent","color","textAlign","padding","name","categories","Number","toFixed"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./smallCompanyBlock.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { isShowStreamNow, isWorkTimeNow } from \"../../calculateTime\";\r\nimport { getDistanceFromLatLonInKm } from \"../../getDistance\";\r\n\r\nconst SmallCompanyBlock = ({ item }) => {\r\n  const [showStream, setShowStream] = useState(false);\r\n  const [workTime, setWorkTime] = useState(false);\r\n  const [isWork, setIsWork] = useState(false);\r\n  const [curDistance, setCurDistance] = useState(null);\r\n\r\n  useEffect(() => {\r\n    isShowStreamNow(item, setShowStream);\r\n    isWorkTimeNow(item, setWorkTime, setIsWork);\r\n  }, [item]);\r\n\r\n  if (navigator.geolocation) {\r\n    navigator.geolocation.getCurrentPosition(\r\n      pos => {\r\n        setCurDistance(\r\n          getDistanceFromLatLonInKm(\r\n            pos.coords.latitude,\r\n            pos.coords.longitude,\r\n            item.coordinates.split(\",\")[0],\r\n            item.coordinates.split(\",\")[1]\r\n          )\r\n        );\r\n      },\r\n      err => {\r\n        console.log(err, \" GEOLOCATION ERROR \");\r\n      }\r\n    );\r\n  } else {\r\n    console.log(\"Геолокация недоступна \");\r\n  }\r\n\r\n  return (\r\n    <Link\r\n      to={{ pathname: `/company/${item.id}` }}\r\n      className=\"SmallCompanyBlock1\"\r\n    >\r\n      <div className=\"imgContainer1\" style={{ background: \"#000\" }}>\r\n        {!!showStream && (\r\n          <video\r\n            className=\"companyImg1\"\r\n            src={item.streams[0].preview}\r\n            autoPlay\r\n          />\r\n        )}\r\n        {!showStream && (\r\n          <div\r\n            className=\"companyImg1\"\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\"\r\n            }}\r\n          >\r\n            <p style={{ color: \"#fff\", textAlign: \"center\", padding: \"20px\" }}>\r\n              На данный момент стрим не идет\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"description1\">\r\n        <div className=\"topBlockText1\">\r\n          <div className=\"companyNameWrap1\">\r\n            <p className=\"companyName1\">{item.name}</p>\r\n            <p className=\"companyType1\">{item.categories[0].name} </p>\r\n          </div>\r\n          {/* <p className=\"companyTitle1\">???????</p> */}\r\n        </div>\r\n        <div className=\"bottomBlockText1\">\r\n          <div className=\"row1\">\r\n            <p className=\"leftText1\">Время работы</p>\r\n          </div>\r\n          <p className=\"rightText1\">{workTime}</p>\r\n        </div>\r\n      </div>\r\n      <div className=\"descriptionMobile1\">\r\n        <p className=\"nameOfCompany1\">\r\n          {item.categories[0].name} “{item.name}”\r\n        </p>\r\n        <p className=\"distanceFirst1 distanceFirstLeft1\">\r\n          {curDistance && <span>{Number(curDistance).toFixed(2)} km</span>}\r\n          {!curDistance && \" 0 km.\"}\r\n        </p>\r\n        {isWork && (\r\n          <p className=\"endTime1\">\r\n            Открыто: до\r\n            <span> {workTime.split(\"-\")[1]}</span>\r\n          </p>\r\n        )}\r\n        {!isWork && (\r\n          <p className=\"endTime1\">\r\n            {/* {workTime} */}\r\n            Закрыто\r\n          </p>\r\n        )}\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default SmallCompanyBlock;\r\n"]},"metadata":{},"sourceType":"module"}