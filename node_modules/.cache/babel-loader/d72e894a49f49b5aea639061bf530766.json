{"ast":null,"code":"import _objectSpread from\"D:\\\\GitHub\\\\party_live_web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\GitHub\\\\party_live_web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from\"react\";import{Link}from\"react-router-dom\";import QUERY from\"../../query\";import\"./companyNav.css\";import smoothscroll from\"smoothscroll-polyfill\";var CompanyNav=function CompanyNav(_ref){var style=_ref.style,clickedType=_ref.clickedType,currentPage=_ref.currentPage,toSlideFixedNav=_ref.toSlideFixedNav;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),uniqueCompanyType=_useState2[0],setUniqueCompanyType=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDown=_useState4[0],setIsDown=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),startX=_useState6[0],setStartX=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),scrollLeft=_useState8[0],setScrollLeft=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),clickedTypeLocal=_useState10[0],setClickedTypeLocal=_useState10[1];var slideBtnMenu=useRef(null);useEffect(function(){QUERY({query:\"query {\\n        categories {\\n          id name slug\\n        }\\n      }\"}).then(function(res){return res.json();}).then(function(data){setUniqueCompanyType(data.data.categories);}).catch(function(err){console.log(err,\"  ERR\");});},[]);var supportsTouch=\"ontouchstart\"in document.documentElement;smoothscroll.polyfill();var scrollBtnToCenter=function scrollBtnToCenter(e){e.preventDefault();var btnPositionToCenter=slideBtnMenu.current.offsetWidth/2-(e.currentTarget.offsetLeft-slideBtnMenu.current.scrollLeft+e.currentTarget.offsetWidth/2);slideBtnMenu.current.scrollTo({left:slideBtnMenu.current.scrollLeft-btnPositionToCenter,behavior:\"smooth\"});};return React.createElement(\"div\",{className:\"overflowClass\",style:(_objectSpread({},style),toSlideFixedNav?{animation:\"toLeftFixed 0.3s ease\",left:\"-200px\"}:{animation:\"toRightFixed 0.3s ease\",left:\"0px\"})},React.createElement(\"div\",{className:\"сompanyNav\",ref:slideBtnMenu// //BROWSER ===========================================\n,onMouseDown:function onMouseDown(e){if(!supportsTouch){setIsDown(true);setStartX(e.pageX-slideBtnMenu.current.offsetLeft);setScrollLeft(slideBtnMenu.current.scrollLeft);}},onMouseLeave:function onMouseLeave(){if(!supportsTouch){setIsDown(false);}},onMouseUp:function onMouseUp(){if(!supportsTouch){setIsDown(false);}},onMouseMove:function onMouseMove(e){if(!supportsTouch){if(!isDown)return;e.preventDefault();var x=e.pageX-slideBtnMenu.current.offsetLeft;var walk=(x-startX)*2;slideBtnMenu.current.scrollLeft=scrollLeft-walk;}}//TOUCH =============================================\n// onTouchStart={e => {\n//   if (supportsTouch) {\n//     setIsDown(true);\n//     setStartX(\n//       Math.ceil(e.nativeEvent.touches[0].clientX) -\n//         slideBtnMenu.current.offsetLeft\n//     );\n//     setScrollLeft(slideBtnMenu.current.scrollLeft);\n//   }\n// }}\n// onTouchEnd={e => {\n//   if (supportsTouch) {\n//     setIsDown(false);\n//   }\n// }}\n// onTouchMove={e => {\n//   if (supportsTouch) {\n//     const x =\n//       e.nativeEvent.touches[0].clientX -\n//       slideBtnMenu.current.offsetLeft;\n//     const walk = (x - startX) * 2;\n//     slideBtnMenu.current.scrollLeft = scrollLeft - walk;\n//   }\n// }}\n},React.createElement(\"div\",{className:!clickedTypeLocal?\"companyNavBlock activeBtn\":\"companyNavBlock\",onClick:function onClick(e){clickedType();setClickedTypeLocal();}},React.createElement(Link,{className:!clickedTypeLocal?\"companyNavLink activeBtnText\":\"companyNavLink\",to:currentPage},React.createElement(\"p\",{className:\"allText\"},\"\\u0412\\u0441\\u0435\"))),uniqueCompanyType.map(function(el,i){var slideBtn=React.createRef();return React.createElement(\"div\",{ref:slideBtn,className:clickedTypeLocal===el.name?\"companyNavBlock activeBtn\":\"companyNavBlock\",key:i,onClick:function onClick(e){clickedType(el.name);setClickedTypeLocal(el.name);scrollBtnToCenter(e);}},React.createElement(Link,{className:clickedTypeLocal===el.name?\"companyNavLink activeBtnText\":\"companyNavLink\",to:currentPage},React.createElement(\"img\",{alt:\"Icon\",className:\"\\u0441ompanyNavImg\",src:\"\".concat(process.env.PUBLIC_URL,\"/img/\").concat(el.slug,\".png\"),width:\"30\",height:\"30\"}),React.createElement(\"p\",{className:\"\\u0441ompanyNavText\"},el.name)));})));};export default CompanyNav;","map":{"version":3,"sources":["D:/GitHub/party_live_web/src/components/companyNav/CompanyNav.js"],"names":["React","useState","useRef","useEffect","Link","QUERY","smoothscroll","CompanyNav","style","clickedType","currentPage","toSlideFixedNav","uniqueCompanyType","setUniqueCompanyType","isDown","setIsDown","startX","setStartX","scrollLeft","setScrollLeft","clickedTypeLocal","setClickedTypeLocal","slideBtnMenu","query","then","res","json","data","categories","catch","err","console","log","supportsTouch","document","documentElement","polyfill","scrollBtnToCenter","e","preventDefault","btnPositionToCenter","current","offsetWidth","currentTarget","offsetLeft","scrollTo","left","behavior","animation","pageX","x","walk","map","el","i","slideBtn","createRef","name","process","env","PUBLIC_URL","slug"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport QUERY from \"../../query\";\r\n\r\nimport \"./companyNav.css\";\r\nimport smoothscroll from \"smoothscroll-polyfill\";\r\n\r\nconst CompanyNav = ({ style, clickedType, currentPage, toSlideFixedNav }) => {\r\n  const [uniqueCompanyType, setUniqueCompanyType] = useState([]);\r\n\r\n  const [isDown, setIsDown] = useState(false);\r\n  const [startX, setStartX] = useState();\r\n  const [scrollLeft, setScrollLeft] = useState();\r\n  const [clickedTypeLocal, setClickedTypeLocal] = useState();\r\n\r\n  const slideBtnMenu = useRef(null);\r\n\r\n  useEffect(() => {\r\n    QUERY({\r\n      query: `query {\r\n        categories {\r\n          id name slug\r\n        }\r\n      }`\r\n    })\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(data => {\r\n        setUniqueCompanyType(data.data.categories);\r\n      })\r\n      .catch(err => {\r\n        console.log(err, \"  ERR\");\r\n      });\r\n  }, []);\r\n\r\n  const supportsTouch = \"ontouchstart\" in document.documentElement;\r\n  smoothscroll.polyfill();\r\n\r\n  const scrollBtnToCenter = e => {\r\n    e.preventDefault();\r\n    const btnPositionToCenter =\r\n      slideBtnMenu.current.offsetWidth / 2 -\r\n      (e.currentTarget.offsetLeft -\r\n        slideBtnMenu.current.scrollLeft +\r\n        e.currentTarget.offsetWidth / 2);\r\n\r\n    slideBtnMenu.current.scrollTo({\r\n      left: slideBtnMenu.current.scrollLeft - btnPositionToCenter,\r\n      behavior: \"smooth\"\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"overflowClass\"\r\n      style={\r\n        ({\r\n          ...style\r\n        },\r\n        toSlideFixedNav\r\n          ? {\r\n              animation: \"toLeftFixed 0.3s ease\",\r\n              left: \"-200px\"\r\n            }\r\n          : {\r\n              animation: \"toRightFixed 0.3s ease\",\r\n              left: \"0px\"\r\n            })\r\n      }\r\n    >\r\n      <div\r\n        className={\"сompanyNav\"}\r\n        ref={slideBtnMenu}\r\n        // //BROWSER ===========================================\r\n        onMouseDown={e => {\r\n          if (!supportsTouch) {\r\n            setIsDown(true);\r\n            setStartX(e.pageX - slideBtnMenu.current.offsetLeft);\r\n            setScrollLeft(slideBtnMenu.current.scrollLeft);\r\n          }\r\n        }}\r\n        onMouseLeave={() => {\r\n          if (!supportsTouch) {\r\n            setIsDown(false);\r\n          }\r\n        }}\r\n        onMouseUp={() => {\r\n          if (!supportsTouch) {\r\n            setIsDown(false);\r\n          }\r\n        }}\r\n        onMouseMove={e => {\r\n          if (!supportsTouch) {\r\n            if (!isDown) return;\r\n            e.preventDefault();\r\n            const x = e.pageX - slideBtnMenu.current.offsetLeft;\r\n            const walk = (x - startX) * 2;\r\n            slideBtnMenu.current.scrollLeft = scrollLeft - walk;\r\n          }\r\n        }}\r\n        //TOUCH =============================================\r\n        // onTouchStart={e => {\r\n        //   if (supportsTouch) {\r\n        //     setIsDown(true);\r\n        //     setStartX(\r\n        //       Math.ceil(e.nativeEvent.touches[0].clientX) -\r\n        //         slideBtnMenu.current.offsetLeft\r\n        //     );\r\n        //     setScrollLeft(slideBtnMenu.current.scrollLeft);\r\n        //   }\r\n        // }}\r\n        // onTouchEnd={e => {\r\n        //   if (supportsTouch) {\r\n        //     setIsDown(false);\r\n        //   }\r\n        // }}\r\n        // onTouchMove={e => {\r\n        //   if (supportsTouch) {\r\n        //     const x =\r\n        //       e.nativeEvent.touches[0].clientX -\r\n        //       slideBtnMenu.current.offsetLeft;\r\n        //     const walk = (x - startX) * 2;\r\n        //     slideBtnMenu.current.scrollLeft = scrollLeft - walk;\r\n        //   }\r\n        // }}\r\n      >\r\n        <div\r\n          className={\r\n            !clickedTypeLocal ? \"companyNavBlock activeBtn\" : \"companyNavBlock\"\r\n          }\r\n          onClick={e => {\r\n            clickedType();\r\n            setClickedTypeLocal();\r\n          }}\r\n        >\r\n          <Link\r\n            className={\r\n              !clickedTypeLocal\r\n                ? \"companyNavLink activeBtnText\"\r\n                : \"companyNavLink\"\r\n            }\r\n            to={currentPage}\r\n          >\r\n            <p className=\"allText\">Все</p>\r\n          </Link>\r\n        </div>\r\n        {uniqueCompanyType.map((el, i) => {\r\n          const slideBtn = React.createRef();\r\n          return (\r\n            <div\r\n              ref={slideBtn}\r\n              className={\r\n                clickedTypeLocal === el.name\r\n                  ? \"companyNavBlock activeBtn\"\r\n                  : \"companyNavBlock\"\r\n              }\r\n              key={i}\r\n              onClick={e => {\r\n                clickedType(el.name);\r\n                setClickedTypeLocal(el.name);\r\n                scrollBtnToCenter(e);\r\n              }}\r\n            >\r\n              <Link\r\n                className={\r\n                  clickedTypeLocal === el.name\r\n                    ? \"companyNavLink activeBtnText\"\r\n                    : \"companyNavLink\"\r\n                }\r\n                to={currentPage}\r\n              >\r\n                <img\r\n                  alt=\"Icon\"\r\n                  className=\"сompanyNavImg\"\r\n                  src={`${process.env.PUBLIC_URL}/img/${el.slug}.png`}\r\n                  width=\"30\"\r\n                  height=\"30\"\r\n                />\r\n                <p className=\"сompanyNavText\">{el.name}</p>\r\n              </Link>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompanyNav;\r\n"]},"metadata":{},"sourceType":"module"}